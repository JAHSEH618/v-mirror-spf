# v-mirror-spf - Shopify AI è™šæ‹Ÿè¯•ç©¿åº”ç”¨

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Shopify](https://img.shields.io/badge/Shopify-App-95BF47?logo=shopify&logoColor=white)
![React](https://img.shields.io/badge/React-20232A?logo=react&logoColor=61DAFB)
![Prisma](https://img.shields.io/badge/Prisma-2D3748?logo=prisma&logoColor=white)

**v-mirror-spf** æ˜¯ä¸€æ¬¾å…ˆè¿›çš„ **Shopify åµŒå…¥å¼åº”ç”¨ (Embedded App)**ï¼Œå°†ç”Ÿæˆå¼ AI çš„å¼ºå¤§èƒ½åŠ›å¼•å…¥æ—¶å°šç”µå•†é¢†åŸŸã€‚é€šè¿‡æ— ç¼é›†æˆ **KlingAI** å’Œ **Google Vertex AI**ï¼Œå®ƒå…è®¸é¡¾å®¢ç›´æ¥åœ¨äº§å“è¯¦æƒ…é¡µè™šæ‹Ÿâ€œè¯•ç©¿â€æœè£…ï¼Œä»è€Œæ˜¾è‘—æå‡ç”¨æˆ·äº’åŠ¨ç‡å¹¶é™ä½é€€è´§ç‡ã€‚

æœ¬é¡¹ç›®åŸºäºç¨³å¥çš„ **Remix** æ¡†æ¶å’Œ **Shopify App Bridge** æ„å»ºï¼Œä¸ºç°ä»£ Shopify å•†å®¶æä¾›åˆè§„ã€å®‰å…¨ä¸”é«˜æ€§èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚
> **ç°å·²æ”¯æŒä¼˜åŒ–çš„ CDN åˆ†å‘å’ŒäºŒè¿›åˆ¶æµå¤„ç†ï¼Œå®ç°æ— å»¶è¿Ÿçš„äº¤äº’ä½“éªŒã€‚**

[English](./README.md) | [ä¸­æ–‡è¯´æ˜](./README_zh-CN.md)

---

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### ğŸ›ï¸ å“è¶Šçš„é¡¾å®¢ä½“éªŒ
- **ä¸€é”®è¯•ç©¿ç»„ä»¶**: è½»é‡çº§æ‚¬æµ®æŒ‰é’®ï¼Œå”¤èµ·ä½“éªŒæµç•…çš„æ¨¡æ€æ¡† (Modal)ã€‚
- **AI æ™ºèƒ½ç”Ÿæˆ**: åˆ©ç”¨å…ˆè¿›çš„æ‰©æ•£æ¨¡å‹ (Diffusion Models)ï¼Œåœ¨æ•°ç§’å†…ç”Ÿæˆé€¼çœŸçš„è¯•ç©¿æ•ˆæœå›¾ã€‚
- **æ— ç¼é›†æˆ**: åŸºäº **Shopify App Embed Block** æŠ€æœ¯æ„å»ºï¼Œæ— éœ€ç¼–å†™ä»»ä½•ä»£ç å³å¯å®‰è£…ï¼Œå®Œç¾æ”¯æŒ Online Store 2.0 ä¸»é¢˜ã€‚
- **å“åº”å¼è®¾è®¡**: é’ˆå¯¹ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯è´­ç‰©ä½“éªŒè¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ã€‚
- **æ²‰æµ¸å¼èšç„¦æ¨¡å¼ (Focus Mode)**: å…¨å±ç¯ç®±é¢„è§ˆï¼Œè®©ç”¨æˆ·ä»”ç»†æŸ¥çœ‹è¯•ç©¿ç»†èŠ‚ã€‚
- **å¤šè¯­è¨€æ”¯æŒ**: è‡ªåŠ¨æ£€æµ‹å¹¶æä¾›è‹±è¯­ã€ä¸­æ–‡ã€æ—¥è¯­å’Œè¥¿ç­ç‰™è¯­ç•Œé¢ã€‚
- **æ™ºèƒ½è®¾å¤‡ä¼˜åŒ–**: ç§»åŠ¨ä¼˜å…ˆè®¾è®¡ï¼Œé€‚é…è§¦æ‘¸äº¤äº’å’Œä¸åŒå±å¹•å¸ƒå±€ã€‚

### ğŸ’¼ å•†å®¶ç®¡ç†åå°
- **æ•°æ®åˆ†æ**: å®æ—¶è¿½è¸ªè¯•ç©¿æ¬¡æ•°å’Œç”¨æˆ·äº’åŠ¨æƒ…å†µã€‚
- **é«˜çº§å½’å› **: ç²¾ç¡®çš„ä¼šè¯å’ŒæŒ‡çº¹è¿½è¸ªï¼Œäº†è§£è·¨è®¾å¤‡ç”¨æˆ·è¡Œä¸ºã€‚
- **ä¸ªæ€§åŒ–è®¾ç½®**:
    - **å¤–è§‚å®šåˆ¶**: è¿™å®šä¹‰ç»„ä»¶é¢œè‰²ã€æŒ‰é’®æ–‡æ¡ˆå’Œæ˜¾ç¤ºä½ç½®ï¼Œä»¥åŒ¹é…å“ç‰Œè°ƒæ€§ã€‚
    - **å“ç‰Œ Logo**: æ”¯æŒä¸Šä¼ è‡ªå®šä¹‰ Logoï¼Œå¼ºåŒ–å“ç‰Œå±•ç¤ºã€‚
- **è®¢é˜…ç®¡ç†**: çµæ´»çš„å¥—é¤å‡çº§/é™çº§è·¯å¾„ï¼ŒåŒ…å«é€æ˜çš„å†å²è´¦å•è®°å½•ã€‚

### ï¿½ å¥—é¤ä¸è®¡è´¹
æœ¬åº”ç”¨é›†æˆäº† Shopify åŸç”Ÿè®¡è´¹ API (Shopify Billing API)ã€‚

| è®¡åˆ’ (Plan) | ä»·æ ¼ | è¯•ç”¨æœŸ | ç”¨é‡é™åˆ¶ | é€‚ç”¨å¯¹è±¡ |
| :--- | :--- | :--- | :--- | :--- |
| **å…è´¹è¯•ç”¨ (Free)** | $0/æœˆ | - | 10 æ¬¡è¯•ç©¿ | å¼€å‘/æµ‹è¯•äººå‘˜ |
| **ä¸“ä¸šç‰ˆ (Professional)** | $49/æœˆ | 14 å¤© | 1,000 æ¬¡è¯•ç©¿ | æˆé•¿å‹å“ç‰Œ |
| **ä¼ä¸šç‰ˆ (Enterprise)** | $199/æœˆ | 14 å¤© | 10,000 æ¬¡è¯•ç©¿ | é«˜æµé‡å•†å®¶ |

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

æœ¬é¡¹ç›®é‡‡ç”¨åŸºäº Remix çš„ç°ä»£æ¶æ„ï¼š

- **å‰ç«¯**: è¿è¡Œåœ¨ Shopify Admin ä¸­çš„ React ç»„ä»¶ (åŸºäº Polaris) ä»¥åŠæ³¨å…¥åˆ°åº—é“ºå‰å°çš„ Vanilla JS/CSSã€‚
- **åç«¯ API**: Remix Loaders/Actions å¤„ç†æ•°æ®åº“äº¤äº’å’Œ AI æœåŠ¡ç¼–æ’ã€‚
- **æ•°æ®åº“**: Prisma ORM (é»˜è®¤å¼€å‘ç¯å¢ƒä½¿ç”¨ SQLiteï¼Œç”Ÿäº§ç¯å¢ƒå¯è½»æ¾åˆ‡æ¢è‡³ PostgreSQL/MySQL)ï¼Œç”¨äºå­˜å‚¨ï¼š
    - `BillingInfo`: è®¢é˜…çŠ¶æ€å’Œç”¨é‡ã€‚
    - `BillingHistory`: æ‰£è´¹è®°å½•ã€‚
    - `WidgetSettings`: å•†å®¶è‡ªå®šä¹‰é…ç½®ã€‚
- **AI æœåŠ¡**: é‡‡ç”¨é€‚é…å™¨æ¨¡å¼ (Adapter Pattern) åœ¨ KlingAI å’Œ Google Vertex AI ä¹‹é—´çµæ´»åˆ‡æ¢ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- [Node.js](https://nodejs.org/) (v18 æˆ–æ›´é«˜ç‰ˆæœ¬)
- å…¨å±€å®‰è£… [Shopify CLI](https://shopify.dev/docs/apps/tools/cli) (`npm install -g @shopify/cli`)
- ä¸€ä¸ª Shopify Partner è´¦å·
- ä¸€ä¸ªå¼€å‘åº—é“º (Development Store)

### å®‰è£…æ­¥éª¤

1.  **å…‹éš†ä»“åº“**
    ```bash
    git clone https://github.com/your-username/v-mirror-spf.git
    cd v-mirror-spf
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    npm install
    ```

3.  **ç¯å¢ƒé…ç½®**
    åœ¨æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ã€‚ä½ å¯ä»¥å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ï¼š
    ```bash
    cp .env.example .env
    ```
    *æ³¨æ„ï¼šè¿è¡Œ `npm run dev` æ—¶ï¼ŒShopify CLI ä¼šè‡ªåŠ¨æ›´æ–°å¿…è¦çš„ç¯å¢ƒå˜é‡ã€‚*

4.  **åˆå§‹åŒ–æ•°æ®åº“**
    åˆå§‹åŒ–æœ¬åœ° SQLite æ•°æ®åº“ã€‚
    ```bash
    npm run setup
    ```

### æœ¬åœ°å¼€å‘

1.  å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
    ```bash
    npm run dev
    ```
2.  æŒ‰ç…§ CLI æç¤ºé€‰æ‹©ä½ çš„ Partner Organization å’Œ Appã€‚
3.  å¯åŠ¨æˆåŠŸåï¼Œåœ¨ç»ˆç«¯æŒ‰ä¸‹ `P` é”®å³å¯åœ¨å¼€å‘åº—é“ºä¸­æ‰“å¼€åº”ç”¨ã€‚

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¯ç”¨åµŒå…¥å¼ç»„ä»¶ (Embed Block)
1.  è¿›å…¥ Shopify Admin > **Online Store (åœ¨çº¿å•†åº—)** > **Themes (ä¸»é¢˜)**ã€‚
2.  ç‚¹å‡»å½“å‰ä¸»é¢˜çš„ **Customize (è‡ªå®šä¹‰)** æŒ‰é’®ã€‚
3.  åœ¨å·¦ä¾§ä¾§è¾¹æ ç‚¹å‡» **App Embeds (åº”ç”¨åµŒå…¥)** å›¾æ ‡ï¼ˆé€šå¸¸æ˜¯ç¬¬ä¸‰ä¸ªå›¾æ ‡ï¼‰ã€‚
4.  æ‰¾åˆ° "V-Mirror Widget" å¹¶å¼€å¯å¼€å…³ã€‚
5.  ç‚¹å‡» **Save (ä¿å­˜)**ã€‚ç°åœ¨è¯•ç©¿ç»„ä»¶å°†å‡ºç°åœ¨ä½ çš„äº§å“é¡µé¢ä¸Šã€‚

### é…ç½® AI å‡­è¯
*æ³¨æ„ï¼šæœ¬é¡¹ç›®ä¸ºç§æœ‰åº”ç”¨ã€‚åœ¨éƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿åœ¨ `shopify.server.js` æˆ– `.env` ä¸­é…ç½®äº†æœ‰æ•ˆçš„ KlingAI/Vertex AI API å¯†é’¥ã€‚*

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
v-mirror-spf/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/         # åå° UI ç»„ä»¶ (Polaris)
â”‚   â”œâ”€â”€ routes/             # Remix è·¯ç”± (é¡µé¢ & API)
â”‚   â”‚   â”œâ”€â”€ app._index.jsx  # ä¸»ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ app.billing.jsx # è®¢é˜…ç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ api.*.jsx       # å†…éƒ¨ API ç«¯ç‚¹
â”‚   â”œâ”€â”€ shopify.server.js   # æœåŠ¡å™¨é…ç½® & é‰´æƒ
â”‚   â””â”€â”€ db.server.js        # Prisma å®¢æˆ·ç«¯å®ä¾‹
â”œâ”€â”€ extensions/             # Theme App Extensions (å‰å°æ‰©å±•)
â”‚   â””â”€â”€ v-mirror-theme-ext/ # åµŒå…¥å¼ä»£ç å— (Liquid/JS/CSS)
â”œâ”€â”€ prisma/                 # æ•°æ®åº“ Schema
â””â”€â”€ shopify.app.toml        # åº”ç”¨æ¸…å•æ–‡ä»¶
```

## ğŸ› ï¸ éƒ¨ç½²

æœ¬åº”ç”¨è®¾è®¡ä¸ºå¯éƒ¨ç½²åœ¨æ”¯æŒ Node.js çš„å¹³å°ï¼ˆå¦‚ Fly.io, Heroku, Renderï¼‰ã€‚

1.  **æ„å»ºåº”ç”¨**: `npm run build`
2.  **è®¾ç½®ç¯å¢ƒå˜é‡**: ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®äº† `SHOPIFY_API_KEY`, `SHOPIFY_API_SECRET` å’Œ `SCOPES`ã€‚
3.  **æ•°æ®åº“**: é€šè¿‡æ›´æ–° `prisma.schema` å’Œ `DATABASE_URL` è¿ç§»åˆ°ç”Ÿäº§çº§æ•°æ®åº“ï¼ˆå¦‚ PostgreSQLï¼‰ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤è´¡çŒ®ï¼è¯· Fork æœ¬ä»“åº“å¹¶æäº¤ Pull Requestã€‚

1.  Fork æœ¬é¡¹ç›®
2.  åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3.  æäº¤ä½ çš„æ”¹åŠ¨ (`git commit -m 'Add some AmazingFeature'`)
4.  æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5.  å¼€å¯ Pull Request

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯åˆ†å‘ã€‚è¯¦æƒ…è¯·å‚é˜… `LICENSE` æ–‡ä»¶ã€‚
