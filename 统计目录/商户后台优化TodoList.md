# Shopify AI Virtual Try-On 商户后台优化 Todo List

**文档版本:** 1.0  
**创建日期:** 2026-01-23  
**基于设计规范:** `Shopify AI Virtual Try-On 商家后台交互设计规范.md`  
**涉及文件:** 
- `app/routes/app._index.jsx` (安装引导页面)
- `app/routes/app.appearance.jsx` (外观配置页面)

---

## 第一部分:安装引导页面优化 (`app._index.jsx`)

### 🎯 视觉与交互增强

#### 1. 步骤卡片激活状态视觉强化
- [ ] 为当前激活步骤添加紫色外发光或加粗边框
- [ ] 实现卡片悬停时阴影加深效果
- [ ] 步骤2卡片需要视觉上突出显示"需要操作"状态

#### 2. 按钮交互优化
- [ ] 实现按钮 hover 时颜色变化(`#7C3AED` → `#6D28D9`)
- [ ] 为"Open Theme Editor"按钮添加 Tooltip:"在新的标签页中打开您的 Shopify 主题编辑器"
- [ ] 为禁用状态的"View Demo"按钮添加 Tooltip:"请先完成上一步以启用此功能"
- [ ] 实现禁用按钮的`cursor: not-allowed`样式

#### 3. 步骤状态检测优化
- [ ] 实现 WebSocket 或定时轮询机制,自动检测 App Block 启用状态
- [ ] 移除手动确认按钮("I've Enabled It"),改为自动检测
- [ ] 当步骤2完成时,自动刷新页面状态并激活步骤3

#### 4. 图标一致性
- [ ] 将步骤1的图标替换为拼图图标(象征应用扩展)
- [ ] 将步骤2的图标替换为画笔图标(象征主题编辑)
- [ ] 将步骤3的图标替换为火箭图标(象征上线)

#### 5. 帮助中心卡片优化
- [ ] 调整帮助图标为紫色圆形背景问号
- [ ] 实现链接 hover 时的下划线效果
- [ ] 更新文档链接到实际的帮助中心URL

---

## 第二部分:外观配置页面优化 (`app.appearance.jsx`)

### 🎨 布局与预览功能

#### 6. 实时预览区域开发
- [ ] 在页面右侧添加实时预览面板
- [ ] 显示模拟的商品页面和浮动按钮
- [ ] 预览按钮实时反映所有配置更改(颜色、文字、位置)
- [ ] 实现滑块拖动时按钮位置的平滑移动动画

#### 7. 小部件位置配置优化
- [ ] 将下拉选择框改为单选按钮组(Radio Group)
- [ ] 实现选中状态的视觉样式(紫色圆点 vs 空心圆圈)
- [ ] 选中文字加粗效果
- [ ] 滑块取值范围调整为 0-100px(当前为10-100px)
- [ ] 数值显示使用紫色(`#7C3AED`)
- [ ] 添加键盘方向键支持微调滑块

#### 8. 颜色配置优化
- [ ] 重新组织布局:将颜色配置模块移到右上方
- [ ] 添加颜色预览框(显示当前颜色)
- [ ] 实现 HEX 输入框实时验证,无效代码时红色边框提示
- [ ] 添加最近使用颜色历史记录功能
- [ ] 将"Text Color"标签改为"Button Text"以更清晰

#### 9. 文本定制优化
- [ ] 为"Button Text"输入框添加最大30字符限制
- [ ] 为"Modal Title"输入框添加最大50字符限制
- [ ] 为"Upload Instructions"文本区域添加最大200字符限制
- [ ] 实现多行文本自动换行和滚动条
- [ ] 移除"Tooltip Text"字段(设计文档中未提及)

#### 10. 高级选项可折叠面板
- [ ] 将高级选项改为可折叠面板设计
- [ ] 默认状态为收起(Collapsed)
- [ ] 添加"V"形图标(Chevron),点击时旋转180度
- [ ] 实现展开/收起的平滑动画(300ms高度过渡)

#### 11. 开关控件(Toggle Switch)替换
- [ ] 将当前的 checkbox 替换为 Toggle Switch 组件
- [ ] 开启状态:紫色背景(`#7C3AED`),滑块在右侧
- [ ] 关闭状态:灰色背景(`#D1D5DB`),滑块在左侧
- [ ] 实现滑块滑动动画(200ms)和背景色渐变
- [ ] 修改"smartDetection"标签为"Auto-detect Clothing Products"
- [ ] 添加描述文字:"Only show widget on clothing items"

#### 12. 操作按钮区优化
- [ ] 移除顶部的重复保存按钮,统一使用底部操作区
- [ ] 添加"Reset to Default"次要按钮
- [ ] 实现重置前的确认对话框
- [ ] 对话框标题:"Reset to Default Settings?"
- [ ] 对话框内容:"Are you sure you want to reset all settings to their default values? This action cannot be undone."
- [ ] 重置操作不自动保存,需用户手动点击"Save Changes"

#### 13. 保存按钮加载状态
- [ ] 保存时添加旋转的 Spinner 图标
- [ ] 按钮文字变为"Saving..."
- [ ] 禁用按钮并使背景色变浅
- [ ] 使用 Toast 替换当前的成功提示
- [ ] 失败时显示详细错误信息

---

## 第三部分:通用交互设计改进

### ♿ 可访问性与用户体验

#### 14. 视觉反馈统一
- [ ] 所有按钮实现 hover、active、focus、disabled 状态样式
- [ ] 添加键盘焦点环(Focus Ring),使用蓝色或品牌紫色
- [ ] 确保所有交互元素支持键盘 Tab 导航

#### 15. ARIA 属性添加
- [ ] 为开关控件添加 ARIA 标签(`role="switch"`, `aria-checked`)
- [ ] 为滑块添加 ARIA 标签(`role="slider"`, `aria-valuemin/max/now`)
- [ ] 为折叠面板添加 ARIA 标签(`role="button"`, `aria-expanded`)

#### 16. 颜色对比度检查
- [ ] 验证所有文字与背景的对比度符合 WCAG AA 标准(≥4.5:1)
- [ ] 特别检查禁用状态、次要按钮的文字可读性

#### 17. 错误处理优化
- [ ] 为无效输入添加内联错误提示
- [ ] 使用 Toast 组件替代所有 alert/confirm
- [ ] 网络错误时提供重试建议

---

## 第四部分:技术架构优化

### ⚙️ 代码质量与性能

#### 18. 状态管理重构
- [ ] 考虑使用`useReducer`替代多个`useState`,统一管理配置状态
- [ ] 实现配置变更的防抖(debounce),减少不必要的重渲染

#### 19. API 优化
- [ ] 添加保存失败时的重试机制
- [ ] 实现乐观更新(Optimistic Update)
- [ ] 添加请求超时处理

#### 20. 预览性能优化
- [ ] 使用`useMemo`缓存预览按钮样式计算
- [ ] 滑块拖动时使用`requestAnimationFrame`优化动画

#### 21. CSS 动画库集成
- [ ] 引入 Framer Motion 或 React Spring 实现高级动画
- [ ] 为折叠面板、开关、模态对话框添加平滑过渡

#### 22. 组件拆分
- [ ] 将预览按钮提取为独立组件 `PreviewButton.jsx`
- [ ] 将颜色选择器提取为独立组件 `ColorPicker.jsx`
- [ ] 将范围滑块提取为独立组件 `RangeSlider.jsx`
- [ ] 将开关控件提取为独立组件 `ToggleSwitch.jsx`

---

## 验收标准

### 安装引导页面
- ✅ 步骤状态自动检测,无需手动确认
- ✅ 所有按钮有明确的 hover/disabled 状态
- ✅ Tooltip 提示清晰,指引用户操作
- ✅ 视觉上突出当前需要操作的步骤

### 外观配置页面
- ✅ 实时预览准确反映所有配置变更
- ✅ 所有输入有有效性验证和长度限制
- ✅ 开关/滑块等控件有平滑动画
- ✅ 重置功能有确认对话框保护
- ✅ 保存/加载状态有明确视觉反馈

### 代码质量
- ✅ 组件职责单一,可复用性强
- ✅ 状态管理清晰,无冗余渲染
- ✅ 所有交互符合 WCAG AA 可访问性标准
- ✅ API 调用有错误处理和超时保护

---

**文档结束**

有问题或需要技术支持,请参考主设计文档或联系开发团队。
